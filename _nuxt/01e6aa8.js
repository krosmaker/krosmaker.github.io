(window.webpackJsonp=window.webpackJsonp||[]).push([[26,22],{356:function(e,t,r){"use strict";var o=new(r(0).a);t.a=o},360:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return l})),r.d(t,"h",(function(){return f})),r.d(t,"g",(function(){return d})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return h}));var o=521,n=373,c=475,l=337,f=368,d=233,v=3,h=1},366:function(e,t,r){var content=r(420);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("6456774a",content,!0,{sourceMap:!1})},380:function(e,t,r){"use strict";var o=r(0),n=r(1);t.a=o.a.extend({name:"comparable",props:{valueComparator:{type:Function,default:n.j}}})},384:function(e,t,r){"use strict";r.r(t);r(58);var o=r(21),n=r(30),c=r(29),l=r(26),f=r(19),d=r(11),v=(r(13),r(0)),h=r(152);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Object(f.a)(e);if(t){var n=Object(f.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(l.a)(this,r)}}var y=function(e,t,r,desc){var o,n=arguments.length,c=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(n<3?o(c):n>3?o(t,r,c):o(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},x=function(e){Object(c.a)(r,e);var t=m(r);function r(){var e;return Object(o.a)(this,r),(e=t.apply(this,arguments)).isDragged=!1,e}return Object(n.a)(r,[{key:"fileInput",get:function(){return this.$refs.fileInput}},{key:"onClick",value:function(){var e=this.fileInput;e.value="",e.click()}},{key:"onDrag",value:function(e){var t;this.isDragged=!1;var r=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;this.extractImage(r)}},{key:"onUpload",value:function(e){var t,r,o=e,n=(null===(t=o.target)||void 0===t?void 0:t.files)||(null===(r=null==o?void 0:o.dataTransfer)||void 0===r?void 0:r.files);this.extractImage(n)}},{key:"extractImage",value:function(e){null!=e&&e.length>0&&this.uploadImage(e[0])}},{key:"uploadImage",value:function(e){new Image;var t=new FileReader,component=this;t.onload=function(e){var t,r=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.result;component.$emit("upload",r)},t.readAsDataURL(e)}}]),r}(v.a);y([Object(h.b)({type:String,required:!0})],x.prototype,"prompt",void 0);var C=x=y([h.a],x),k=(r(419),r(74)),$=r(153),_=r.n($),O=r(145),D=r(332),component=Object(k.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"upload-container gray text-center rounded-lg",class:{"is-dragged":e.isDragged},on:{click:e.onClick,drop:function(t){return t.preventDefault(),e.onDrag(t)},dragover:function(e){e.preventDefault()},dragenter:function(t){e.isDragged=!0},dragend:function(t){e.isDragged=!1},dragleave:function(t){e.isDragged=!1}}},[r("v-icon",{attrs:{small:""}},[e._v("mdi-upload")]),e._v("\n  "+e._s(e.prompt)+"\n  "),r("input",{ref:"fileInput",attrs:{type:"file",accept:"image/*"},on:{change:e.onUpload}})],1)}),[],!1,null,"5a686b3e",null);t.default=component.exports;_()(component,{VCard:O.a,VIcon:D.a})},417:function(e,t,r){var content=r(489);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("b9c01a56",content,!0,{sourceMap:!1})},418:function(e,t,r){var content=r(491);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(16).default)("c07b3fe2",content,!0,{sourceMap:!1})},419:function(e,t,r){"use strict";r(366)},420:function(e,t,r){var o=r(15)(!1);o.push([e.i,".upload-container[data-v-5a686b3e]{border:1px dashed #757575;padding:1.5em 1em}.upload-container input[data-v-5a686b3e]{display:none}.is-dragged[data-v-5a686b3e]{background-color:hsla(0,0%,46.7%,.33333)}",""]),e.exports=o},488:function(e,t,r){"use strict";r(417)},489:function(e,t,r){var o=r(15)(!1);o.push([e.i,".cropper-bg{background-image:none}.cropper-modal{background-color:transparent;opacity:1}.fixed-label-slider label{width:32px;text-align:right}",""]),e.exports=o},490:function(e,t,r){"use strict";r(418)},491:function(e,t,r){var o=r(15)(!1);o.push([e.i,"h1[data-v-356f2422]{padding:.6em .6em 1em}h3[data-v-356f2422]{padding-top:1.5em;padding-left:.8em;padding-bottom:1em}.cropper-container[data-v-356f2422]{background-color:#121212;border-radius:10px}.cropper-container .cropper[data-v-356f2422]{max-width:370px;min-height:100px;max-height:250px}.fade-enter-active[data-v-356f2422],.fade-leave-active[data-v-356f2422]{transition:opacity .2s}.fade-enter[data-v-356f2422],.fade-leave-to[data-v-356f2422]{opacity:0}.crop-switch[data-v-356f2422]{margin-top:-1em;padding:0}",""]),e.exports=o},524:function(e,t,r){"use strict";r.r(t);r(58);var o=r(21),n=r(30),c=r(29),l=r(26),f=r(19),d=r(11),v=(r(13),r(49),r(0)),h=r(152),m=r(159),y=r(360),x=r(356),C=r(207);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Object(f.a)(e);if(t){var n=Object(f.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(l.a)(this,r)}}var $=function(e,t,r,desc){var o,n=arguments.length,c=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(n<3?o(c):n>3?o(t,r,c):o(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},_=function(e){Object(c.a)(r,e);var t=k(r);function r(){var e;return Object(o.a)(this,r),(e=t.apply(this,arguments)).invalidate=!0,e.replaceImage=!0,e.reloaded=!0,e.sliderIconColor="#777777",e.updateCroppedImage=Object(m.debounce)((function(t){if(e.reloaded)e.reloaded=!1;else{var image=t.getCroppedCanvas().toDataURL("image/png");e.$store.commit("export/setDirty",!0),e.$store.commit("figurine/crop",image),e.$store.commit("figurine/setCropperData",t)}}),150),e}return Object(n.a)(r,[{key:"activeTab",get:function(){return this.$store.state.sidebar.activeTab}},{key:"height",get:function(){return this.$store.state.figurine.height},set:function(e){this.$store.commit("export/setDirty",!0),this.$store.commit("figurine/setHeight",e)}},{key:"offsetX",get:function(){return this.$store.state.figurine.offsetX},set:function(e){this.$store.commit("export/setDirty",!0),this.$store.commit("figurine/setOffsetX",e)}},{key:"offsetY",get:function(){return this.$store.state.figurine.offsetY},set:function(e){this.$store.commit("export/setDirty",!0),this.$store.commit("figurine/setOffsetY",e)}},{key:"useCropped",get:function(){return this.$store.state.figurine.useCropped},set:function(e){this.$store.commit("export/setDirty",!0),this.$store.commit("figurine/setCropping",e),this.restoreCropperSettings()}},{key:"mounted",value:function(){var e=this;this.restoreCropperSettings(),x.a.$on("card-load",(function(){e.invalidate=!0,e.replaceImage=!0,e.reloaded=!0}))}},{key:"restoreCropperSettings",value:function(){var e=this.$store.state.figurine;if(e.useCropped){if(this.replaceImage)return this.replaceImage=!1,void this.cropper.replace(e.original);if(this.invalidate){this.invalidate=!1;var t=e.cropper;null!=t&&(this.cropper.setCanvasData(t.canvasData),this.cropper.setData(t.croppingData))}}}},{key:"cropper",get:function(){return this.$refs.cropper}},{key:"aspectRatio",get:function(){return y.d/y.c}},{key:"onUpload",value:function(image){this.useCropped=!0,this.$store.commit("export/setDirty",!0),this.$store.commit("figurine/upload",image),this.cropper.replace(image),this.$emit("focus"),this.$store.commit("notification/add",{message:"card.edit.notification.figurineUpload"})}},{key:"onCrop",value:function(){if(this.invalidate){if(this.restoreCropperSettings(),null!=this.$store.state.background.cropper)return}else if(!this.useCropped)return;this.updateCroppedImage(this.cropper)}}]),r}(v.a),O=_=$([Object(h.a)({watch:{activeTab:function(e,t){e===C.TabId.FIGURINE&&this.restoreCropperSettings()}}})],_),D=(r(488),r(490),r(74)),j=r(153),I=r.n(j),w=r(119),R=r(594),S=r(348),U=r(332),V=r(595),M=r(385),P=r(546),component=Object(D.a)(O,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card-text",[r("h1",[e._v(e._s(e.$t("card.edit.figurine")))]),e._v(" "),r("DropFileUpload",{attrs:{prompt:e.$t("card.edit.imageUploadPrompt")},on:{upload:e.onUpload}}),e._v(" "),r("h3",[e._v(e._s(e.$t("card.edit.customize")))]),e._v(" "),r("v-row",[r("v-col",{staticClass:"pa-0",attrs:{cols:"6"}},[r("v-slider",{staticClass:"fixed-label-slider",attrs:{dense:"",min:"645",max:"815"},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("v-icon",{attrs:{color:e.sliderIconColor}},[e._v(" mdi-pan-horizontal ")])]},proxy:!0}]),model:{value:e.offsetX,callback:function(t){e.offsetX=t},expression:"offsetX"}})],1),e._v(" "),r("v-col",{staticClass:"pa-0",attrs:{cols:"6"}},[r("v-slider",{staticClass:"fixed-label-slider",attrs:{dense:"",min:"-140",max:"160"},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("v-icon",{attrs:{color:e.sliderIconColor}},[e._v(" mdi-pan-vertical ")])]},proxy:!0}]),model:{value:e.offsetY,callback:function(t){e.offsetY=t},expression:"offsetY"}})],1),e._v(" "),r("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[r("v-slider",{staticClass:"fixed-label-slider",attrs:{dense:"",min:"55",max:"295"},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("v-icon",{attrs:{color:e.sliderIconColor}},[e._v(" mdi-resize ")])]},proxy:!0}]),model:{value:e.height,callback:function(t){e.height=t},expression:"height"}})],1),e._v(" "),r("v-col",{staticClass:"crop-switch",attrs:{cols:"12"}},[r("v-switch",{staticClass:"mx-2",attrs:{label:e.$t("card.edit.enableCropping")},model:{value:e.useCropped,callback:function(t){e.useCropped=t},expression:"useCropped"}})],1)],1),e._v(" "),r("transition",{attrs:{name:"fade",mode:"in-out"}},[r("v-container",{directives:[{name:"show",rawName:"v-show",value:e.useCropped,expression:"useCropped"}],staticClass:"cropper-container"},[r("vue-cropper",{ref:"cropper",staticClass:"cropper",attrs:{dragMode:"move","view-mode":1,responsive:!1,autoCropArea:1},on:{crop:e.onCrop}})],1)],1)],1)}),[],!1,null,"356f2422",null);t.default=component.exports;I()(component,{DropFileUpload:r(384).default}),I()(component,{VCardText:w.b,VCol:R.a,VContainer:S.a,VIcon:U.a,VRow:V.a,VSlider:M.a,VSwitch:P.a})}}]);